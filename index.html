(async function() {
    console.log("🔄 리트윗 취소 시작");
    if (!confirm("리트윗을 취소하시겠습니까?")) return;
    
    window.scrollTo({top: 0, behavior: "smooth"});
    await new Promise(r => setTimeout(r, 2000));
    
    let count = 0;
    for (let i = 0; i < 50; i++) {
        const buttons = document.querySelectorAll('[data-testid="unretweet"]');
        if (buttons.length > 0) {
            for (const btn of buttons) {
                if (btn && btn.offsetParent) {
                    btn.click();
                    await new Promise(r => setTimeout(r, 800));
                    
                    const confirmBtn = document.querySelector('[data-testid="unretweetConfirm"]');
                    if (confirmBtn) {
                        confirmBtn.click();
                        count++;
                        console.log(`🔄 완료: ${count}개`);
                        await new Promise(r => setTimeout(r, 800));
                    }
                }
            }
        }
        
        window.scrollBy(0, window.innerHeight * 0.8);
        await new Promise(r => setTimeout(r, 2500));
        
        if (window.innerHeight + window.scrollY >= document.body.scrollHeight - 100) break;
    }
    alert(`🎉 완료! ${count}개 취소됨`);
})();
